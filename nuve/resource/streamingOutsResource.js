"use strict";var dataAccess=require("../data_access"),cloudHandler=require("../cloudHandler"),e=require("../errors"),logger=require("./../logger").logger,log=logger.getLogger("StreamingOutsResource");exports.getList=function(r,o,n){log.debug("Representing streaming-outs for room ",r.params.room,"and service",r.authData.service._id),cloudHandler.getSubscriptionsInRoom(r.params.room,"streaming",function(r){if("error"===r)return n(new e.CloudError("Operation failed"));o.send(r)})},exports.add=function(r,o,n){var e={type:(e=r.body).type="streaming",connection:{url:r.body.url},media:r.body.media};cloudHandler.addServerSideSubscription(r.params.room,e,function(r,e){if("error"===r)return n(e);o.send(r)})},exports.patch=function(r,o,n){var a=r.params.id,t=r.body;cloudHandler.controlSubscription(r.params.room,a,t,function(r){if("error"===r)return n(new e.CloudError("Operation failed"));o.send(r)})},exports.delete=function(r,o,n){var a=r.params.id;cloudHandler.deleteSubscription(r.params.room,a,function(r){log.debug("result",r),"error"===r?n(new e.CloudError("Operation failed")):o.send()})};