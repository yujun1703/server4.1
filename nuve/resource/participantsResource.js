"use strict";var dataAccess=require("../data_access"),cloudHandler=require("../cloudHandler"),e=require("../errors"),logger=require("./../logger").logger,log=logger.getLogger("ParticipantsResource");exports.getList=function(r,o,a){log.debug("Representing participants for room ",r.params.room,"and service",r.authData.service._id),cloudHandler.getParticipantsInRoom(r.params.room,function(r){if("error"===r)return a(new e.CloudError("Operation failed"));o.send(r)})},exports.get=function(a,t,n){var i=a.params.participant;cloudHandler.getParticipantsInRoom(a.params.room,function(r){if("error"===r)return n(new e.CloudError("Operation failed"));for(var o in r)if(r[o].id===i)return log.debug("Found participant",i),void t.send(r[o]);log.error("Participant",a.params.participant,"does not exist"),n(new e.NotFoundError("Participant not found"))})},exports.patch=function(r,o,a){var t=r.params.participant,n=r.body;cloudHandler.updateParticipant(r.params.room,t,n,function(r){if("error"===r)return a(new e.CloudError("Operation failed"));o.send(r)})},exports.delete=function(r,o,a){var t=r.params.participant;cloudHandler.deleteParticipant(r.params.room,t,function(r){log.debug("result",r),"error"===r?a(new e.CloudError("Operation failed")):o.send()})};